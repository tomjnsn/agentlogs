name = "aei-server"
main = "src/index.ts"
compatibility_date = "2025-01-15"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"  # Available as c.env.DB in your code
database_name = "aei"
database_id = "local-dev-placeholder"  # For local dev; update with actual UUID for production
migrations_dir = "migrations"  # Drizzle generates migrations here
migrations_table = "d1_migrations"  # Track applied migrations

# Environment variables (non-sensitive defaults)
# NOTE: Sensitive values should be in .dev.vars (local) or wrangler secrets (production)
[vars]
WEB_URL = "http://localhost:3001"

# Development configuration
[env.development]
vars = { WEB_URL = "http://localhost:3001" }

# Production configuration
[env.production]
vars = { WEB_URL = "https://your-production-url.com" }
# Set API_TOKEN via: wrangler secret put API_TOKEN

# Build configuration
[build]
command = "echo 'No build needed - TypeScript handled by wrangler'"
