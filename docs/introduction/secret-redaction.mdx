---
title: Secret Redaction
description: Automatic detection and redaction of secrets before upload
---

# Secret Redaction

AgentLogs automatically scans all transcripts for secrets and sensitive data before uploading. This ensures your API keys, tokens, passwords, and other credentials never leave your machine in plain text.

## How It Works

When you sync or upload a transcript, the CLI:

1. Parses the transcript content
2. Scans all text for known secret patterns
3. Redacts detected secrets with asterisks (`*`)
4. Uploads only the redacted version

<Note>Redaction happens entirely on your machine. Secrets are never sent to AgentLogs servers.</Note>

## What Gets Detected

The scanner includes **1,600+ patterns** covering secrets from major services and platforms:

### AI & ML Providers

| Provider    | Pattern Example         |
| ----------- | ----------------------- |
| OpenAI      | `sk-...`, `sk-proj-...` |
| Anthropic   | `sk-ant-...`            |
| HuggingFace | `hf_...`                |
| Replicate   | `r8_...`                |

### Authentication Tokens

| Type          | Pattern Example                        |
| ------------- | -------------------------------------- |
| JWT           | `eyJ...`                               |
| Bearer tokens | `Bearer ...`                           |
| OAuth secrets | `client_secret=...`                    |
| GitHub PAT    | `github_pat_...`, `ghp_...`, `gho_...` |
| GitLab PAT    | `glpat-...`                            |

### Database Connection Strings

| Database   | Pattern Example                   |
| ---------- | --------------------------------- |
| PostgreSQL | `postgres://user:pass@host/db`    |
| MongoDB    | `mongodb+srv://user:pass@host/db` |
| MySQL      | `mysql://user:pass@host/db`       |
| Redis      | `redis://user:pass@host`          |

### Cloud & DevOps

| Service    | Pattern Example              |
| ---------- | ---------------------------- |
| AWS        | Access keys, ARNs            |
| Stripe     | `pk_live_...`, `sk_live_...` |
| SendGrid   | `SG....`                     |
| Sentry DSN | `https://...@sentry.io/...`  |
| Discord    | Bot tokens, webhooks         |
| Telegram   | Bot tokens                   |

### Generic Patterns

The scanner also detects common secret formats:

- Private keys (`-----BEGIN RSA PRIVATE KEY-----`)
- Generic API keys (`api_key=...`, `apikey:...`)
- Password fields (`password=...`, `passwd:...`)
- Secret fields (`secret=...`, `client_secret:...`)

## Length-Preserving Redaction

Secrets are redacted while preserving string length and JSON structure. This ensures transcripts remain valid and parseable after redaction.

```
// Before
"Authorization": "Bearer sk-ant-api03-abc123..."

// After
"Authorization": "Bearer ************************"
```

Structural characters like quotes, colons, and brackets are preserved so JSON remains valid.

## Pattern Sources

The scanner uses patterns from [secrets-patterns-db](https://github.com/mazen160/secrets-patterns-db), a community-maintained database of secret detection patterns.

We've added custom patterns on top for better coverage of AI tools and modern services:

| Category       | Custom Patterns Added                                                    |
| -------------- | ------------------------------------------------------------------------ |
| AI Providers   | OpenAI, Anthropic, Cohere, HuggingFace, Replicate                        |
| Authentication | JWT, OAuth client secrets, Bearer tokens, Google OAuth                   |
| Git Platforms  | GitHub fine-grained PATs, GitLab PATs and runner tokens                  |
| Database URIs  | MongoDB, PostgreSQL, MySQL, Redis, JDBC, password-in-URL                 |
| Cloud & DevOps | DigitalOcean, Vault, CircleCI, New Relic, Sentry DSN, Cloudinary         |
| Messaging      | Discord bot tokens and webhooks, Telegram bots, Microsoft Teams webhooks |
| Payment        | Stripe publishable keys, PayPal Braintree, Square                        |
| Services       | SendGrid, Mailgun, MailChimp, Shopify, Dropbox, Asana, Linear            |
| Generic        | API keys, secrets, tokens, private key blocks, certificates              |

Additional pattern sources:

- [100 Regex Patterns for Secrets](https://blogs.jsmon.sh/100-regex-patterns/)
- [secret-regex-list](https://github.com/h33tlit/secret-regex-list)

## Limitations

While the scanner catches the vast majority of secrets, it cannot detect:

- Custom or proprietary secret formats
- Secrets that don't match common patterns
- Encrypted or encoded secrets (base64-wrapped, etc.)

For maximum security, we recommend also using allowlist mode to control exactly which repositories are captured. See [Permissions](/introduction/permissions) for details.
